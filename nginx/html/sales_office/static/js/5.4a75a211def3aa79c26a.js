webpackJsonp([5],{Bq96:function(e,t){},kR8c:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),n=a("exGp"),i=a.n(n),l=a("1h8J"),c=a("yclV"),u={name:"team",data:function(){return{dis:!1,isLoad:!1,total:100,value:"",radio:"",time:"",isDia:!1,user:null,sel:{team_name:null,leader:null,pre_page:10,page_num:1},tabName:"创建团队",data:{team_id:null,team_name:null,leader:null},rules:{team_name:[{required:!0,message:"团队名称不可为空",trigger:"blur"}]},options:[],leaders:[],tableData:[]}},components:{},computed:{},created:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getUser();case 1:case"end":return t.stop()}},t,e)}))()},mounted:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$route.query.sel&&(e.sel=e.$route.query.sel),t.next=3,e.changeDate();case 3:return t.next=5,e.chanTeam();case 5:case"end":return t.stop()}},t,e)}))()},activated:function(){},deactivated:function(){},methods:{init:function(){this.isLoad=!1,this.data={team_id:null,team_name:null,leader:null}},changeDate:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.p)(e.sel);case 2:if(0==(a=t.sent).code){t.next=6;break}return e.$message({type:"error",message:a.msg}),t.abrupt("return");case 6:e.tableData=a.data.list,e.total=a.data.total;case 8:case"end":return t.stop()}},t,e)}))()},indexMethod:function(e){return e+1},handleCurrentChange:function(e){this.sel.page_num=e,this.changeDate()},set:function(e){var t=this;return i()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.tabName="修改",a.next=3,t.chanLeader();case 3:return t.dis=!0,a.next=6,Object(l.o)({team_id:e.team_id});case 6:if(0==(r=a.sent).code){a.next=10;break}return t.$message({type:"error",message:r.msg}),a.abrupt("return");case 10:t.data=r.data,t.isDia=!0,t.isLoad=!1;case 13:case"end":return a.stop()}},a,t)}))()},del:function(e){var t=this;return i()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("您确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.e)({team_id:e.team_id});case 2:if(0==(r=a.sent).code){a.next=6;break}return t.$message({type:"error",message:r.msg}),a.abrupt("return");case 6:t.$message({type:"success",message:"删除成功!"}),t.changeDate();case 8:case"end":return a.stop()}},a,t)})));case 1:case"end":return a.stop()}},a,t)}))()},showTab:function(e){var t=this;return i()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$router.push({name:"teamDetails",query:{team_id:e.team_id},params:{sel:t.sel}});case 1:case"end":return a.stop()}},a,t)}))()},add:function(){var e=this;return i()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isDia=!0,e.tabName="添加",t.next=4,e.chanLeader();case 4:e.init(),e.dis=!1;case 6:case"end":return t.stop()}},t,e)}))()},closeSet:function(){this.isDia=!1,this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},upOk:function(e){var t=this;return i()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=i()(s.a.mark(function e(a){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=23;break}if(t.data.team_name){e.next=4;break}return t.$message({type:"error",message:"团队名称不可为空"}),e.abrupt("return");case 4:if(t.isLoad=!0,r=void 0,"添加"!=t.tabName){e.next=12;break}return e.next=9,Object(l.c)(t.data);case 9:r=e.sent,e.next=15;break;case 12:return e.next=14,Object(l.y)(t.data);case 14:r=e.sent;case 15:if(t.isLoad=!1,0==r.code){e.next=19;break}return t.$message({type:"error",message:r.msg}),e.abrupt("return");case 19:t.$message({type:"success",message:"设置成功"}),t.init(),t.changeDate(),t.isDia=!1;case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}},a,t)}))()},reset:function(){var e=this.sel;e.leader=null,e.team_name=null,this.sel=e},getUser:function(){var e=Object(c.a)("user"),t=e?JSON.parse(e):{};this.user=t},chanTeam:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.t)({build_id:e.user.build_id});case 2:if(0==(a=t.sent).code){t.next=6;break}return e.$message({type:"error",message:a.msg}),t.abrupt("return");case 6:Array.isArray(a.data)?e.options=a.data:e.options=[],e.options.unshift(null);case 8:case"end":return t.stop()}},t,e)}))()},chanLeader:function(){var e=this;return i()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.j)({});case 2:if(0==(a=t.sent).code){t.next=6;break}return e.$message({type:"error",message:a.msg}),t.abrupt("return");case 6:Array.isArray(a.data)?e.leaders=a.data:e.leaders=[],e.leaders.unshift(null);case 8:case"end":return t.stop()}},t,e)}))()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"100%"}},[a("div",{staticClass:"menu-top"},[e._v("团队管理")]),e._v(" "),a("div",{staticClass:"table-top radius_8"},[a("div",{staticClass:"table-top-left"},[a("div",{staticClass:"table-top-left-top"},[a("div",{staticClass:"div_p"},[a("span",{staticClass:"font_size_20"},[e._v("团队")]),e._v(" "),a("el-select",{staticClass:"inp",attrs:{placeholder:"请选择"},model:{value:e.sel.team_name,callback:function(t){e.$set(e.sel,"team_name",t)},expression:"sel.team_name"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:null==e?"全部":e,value:e}})}),1)],1),e._v(" "),a("div",{staticClass:"div_p"},[a("span",{staticClass:"font_size_20"},[e._v("销售经理")]),e._v(" "),a("el-input",{staticClass:"inp",attrs:{placeholder:"请输入内容"},model:{value:e.sel.leader,callback:function(t){e.$set(e.sel,"leader",t)},expression:"sel.leader"}})],1),e._v(" "),e._m(0)])]),e._v(" "),a("div",{staticClass:"table-top-rig"},[a("el-button",{staticClass:"but",on:{click:function(t){return e.reset()}}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"but",attrs:{type:"primary"},on:{click:function(t){return e.changeDate()}}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"menu-small-top"},[a("span",{staticClass:"font_size_weight_600"},[e._v("团队列表")]),e._v(" "),300!=e.user.auth?a("el-button",{staticClass:"but",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")]):e._e()],1),e._v(" "),a("div",{staticClass:"table-btn"},[[a("el-table",{staticClass:"font_size_16",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",width:"100",align:"center",prop:"NO"}}),e._v(" "),a("el-table-column",{attrs:{prop:"team_name",label:"团队名",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leader",width:"220",label:"销售经理"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saller_tel",width:"220",label:"销售经理联系方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nums",width:"220",label:"团队人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"build_name",width:"220",label:"项目"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"font_size_14",attrs:{type:"text",size:"small"},on:{click:function(a){return e.showTab(t.row)}}},[e._v("查看详情")]),e._v(" "),300!=e.user.auth?a("el-button",{staticClass:"font_size_14",attrs:{type:"text",size:"small"},on:{click:function(a){return e.set(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),300!=e.user.auth?a("el-button",{staticClass:"font_size_14",attrs:{type:"text",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"",layout:"total,  prev, pager, next, jumper","page-size":e.sel.pre_page,"current-page":e.sel.page_num,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],2),e._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,title:e.tabName,visible:e.isDia,width:"420px","before-close":e.closeSet},on:{"update:visible":function(t){e.isDia=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.data,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"团队名称",prop:"team_name"}},[a("el-input",{staticClass:"inp",attrs:{placeholder:"请输入"},model:{value:e.data.team_name,callback:function(t){e.$set(e.data,"team_name",t)},expression:"data.team_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销售经理"}},[a("el-select",{staticClass:"inp",attrs:{placeholder:"请选择"},model:{value:e.data.leader,callback:function(t){e.$set(e.data,"leader",t)},expression:"data.leader"}},e._l(e.leaders,function(e,t){return a("el-option",{key:t,attrs:{label:null==e?"请选择":e,value:e}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeSet()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.isLoad},on:{click:function(t){return e.upOk("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"div_p"},[t("span",{staticClass:"font_size_20"}),this._v(" "),t("div",{staticClass:"inp"})])}]};var d=a("VU/8")(u,o,!1,function(e){a("Bq96"),a("xIyA")},"data-v-3d4a650d",null);t.default=d.exports},xIyA:function(e,t){}});
//# sourceMappingURL=5.4a75a211def3aa79c26a.js.map